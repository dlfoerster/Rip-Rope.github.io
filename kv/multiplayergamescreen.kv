#:kivy 2.2.0
#:import utils kivy.utils

<MultiplayerGameScreen>:
    # canvas.before:
    #     Color: 
    #         rgb: utils.get_color_from_hex("#03fc45")
    #     Rectangle:
    #         size: self.size
    #         pos: self.pos
    Background:
        size_hint: 1, .9
        pos_hint: {"top": .9, "left": 1}
        id: background
        texture: self.full_background_texture
        canvas:
            Rectangle:
                id: full_background
                size: self.width, 7000
                pos: 0, self.height - 7000
                texture: self.full_background_texture
            # Rope Textures
            Rectangle:
                id: rope_1
                size: 64, 5000
                pos: root.x + (0.18 * self.width) - 32, 0
                texture: self.rope_texture

            Rectangle:
                id: rope_2
                size: 64, 5000
                pos: root.x + (0.34 * self.width) - 32, 0
                texture: self.rope_texture

            Rectangle:
                id: rope_3
                size: 64, 5000
                pos: root.x + (0.5 * self.width) - 32, 0
                texture: self.rope_texture

            Rectangle:
                id: rope_4
                size: 64, 5000
                pos: root.x + (0.66 * self.width) - 32, 0
                texture: self.rope_texture

            Rectangle:
                id: rope_5
                size: 64, 5000
                pos: root.x + (0.82 * self.width) - 32, 0
                texture: self.rope_texture

        Character_1:
            id: character_1
            source: "Images/characters/1-monkey.png"
            size_hint: None, None
            size: 256, 256
            pos: root.x + (0.5 * (root.width))-(.5*self.width), root.height / 1.45
        
        Character_2:
            id: character_2
            source: "Images/characters/2-super_monkey.png"
            size_hint: None, None
            size: 256, 256
            pos: root.x + (0.64 * (root.width))-(.5*self.width), root.height / 1.45

    FloatLayout:
        size_hint: 1, .1
        pos_hint: {"top": 1, "left": 1}
        LabelButton:
            canvas.before:
                Color: 
                    rgb: utils.get_color_from_hex("#02a646") if self.state == 'normal' else utils.get_color_from_hex("#025928")
                Rectangle:
                    size: self.size
                    pos: self.pos
            size_hint: .2, 1
            pos_hint: {"top": 1, "left": 1}
            text: 'Back'
            color: (0,0,0,1) if self.state == 'normal' else (1,1,1,1)
            underline: True
            on_release:
                app.change_screen("multiplayer_screen")
                app.stop_server()
                app.reset_multiplayer()